import{b as _,h as K,E as R,k as g,l as k,i as B,r as S,o as i,c as h,e as l,n as m,u as s,w,G as j,H as N,A as z,t as C,m as E,F as I,I as P,y as $,J as D,L as U}from"./vendor.6c6f0931.js";import{_ as F}from"./box-icon.48ae1a5f.js";import{_ as L,u as t,T as x,r as V}from"./index.4d9ff2a0.js";const G=["src"],H=["placeholder"],J={class:"text-sm font-medium text-right whitespace-nowrap text-secondary relative left-3"},Q=_({props:{urlPattern:{type:String,default:"https://www.baidu.com/s?wd={query}",required:!1},iconName:{type:String,default:"baidu.svg",required:!1}},setup(c){const o=c;function a(){t().caret=!0}function n(){t().caret=!1}const e=K({tip:" ",searchStr:"",placeholder:"",isComposing:!1});let d=R(()=>o.urlPattern.replace("{query}",e.searchStr));function f(){e.isComposing=!0}function p(){setTimeout(()=>{e.isComposing=!1},10)}function b(r){if(e.searchStr=="#debug"){t().debug=!0;return}e.searchStr!=""&&(e.isComposing||(t().engine,t().postRecord(e.searchStr,t().engine),window.open(d.value,"_blank")))}const v=g(null);k(()=>t().engine,()=>{setTimeout(()=>{var r;return(r=v.value)==null?void 0:r.focus()},100)});const M=g(null);let T=g(100);B(()=>{window.addEventListener("scroll",()=>{T.value=M.value.getBoundingClientRect().top})}),k(()=>e.searchStr,()=>{if(!e.searchStr.startsWith("\\")){for(let r of t().engines)if(e.searchStr==r.command||e.searchStr==r.title){e.tip=`\u6309\u4E0B\u7A7A\u683C\u9009\u62E9\u300C${r.title}\u300D`;break}else e.tip=" ";for(let r of t().engines)(e.searchStr.startsWith(r.command+" ")||e.searchStr.startsWith(r.title+" "))&&(t().selectEngine(r),e.searchStr="")}}),k(()=>t().hoverEngine,(r,u)=>{e.searchStr==""&&(r?e.placeholder=`\u8F93\u5165\u300C${r.command}\u300D\u53EF\u9009\u62E9\u300C${r.title}\u300D`:e.placeholder="Search for Your Quasar")});function A(){e.searchStr!=""}function q(){e.searchStr!=""&&(e.tip="")}return(r,u)=>{const W=S("dot-hover");return i(),h("div",{class:m(["inline-flex flex-row items-center h-14 w-full gap-2 py-0 pl-4 pr-2 rounded-[1rem] bg-overlay text-sm md:text-base align-middle sticky top-4 z-[500] transition-shadow border-zinc-200 dark:border-zinc-700 border-[0.5px]",{"shadow-2xl":s(T)<=4*4}]),ref_key:"searchbar",ref:M},[l("img",{src:`https://gitee.com/CatREFuse/img-base/raw/master/icons/${c.iconName}`,class:m(["w-6 h-6 select-none shrink-0",{white:s(t)().theme==s(x).dark}])},null,10,G),w(l("input",{type:"text",class:"h-12 font-bold w-full placeholder:text-zinc-400 placeholder:font-bold outline-none bg-overlay text-main",placeholder:s(e).placeholder,onKeydown:u[0]||(u[0]=N(y=>b(),["enter"])),"onUpdate:modelValue":u[1]||(u[1]=y=>s(e).searchStr=y),ref_key:"input",ref:v,onMouseenter:a,onMouseleave:n,onCompositionstart:f,onCompositionend:p,autocorrect:"off"},null,40,H),[[j,s(e).searchStr]]),l("p",J,z(s(e).tip),1),w(C(F,{name:"bx-right-arrow-alt",size:"l",class:"select-none hover:cursor-pointer text-main shrink-0",onClick:u[2]||(u[2]=y=>b()),style:E({opacity:s(e).searchStr==""?.3:1}),onMouseenter:A,onMouseleave:q,onCompositionstart:f,onCompositionend:p},null,8,["style"]),[[W]])],2)}}});var Y=L(Q,[["__scopeId","data-v-b79ae0c6"]]);const O={class:"w-4 h-4 md:w-6 md:h-6 overflow-hidden"},X=["src"],Z=_({props:{iconName:{default:"baidu.svg"},title:{default:"\u767E\u5EA6"},chosen:{type:Boolean,default:!1},engine:null,darkfilter:{type:Boolean,default:!1}},emits:["chose"],setup(c){const o=c;function a(){t().hoverEngine=o.engine}function n(){t().hoverEngine=null}const e=g(null),d=g(0);B(()=>{var p;d.value=((p=e.value)==null?void 0:p.clientWidth)||0});function f(){t().selectEngine(o.engine)}return(p,b)=>{const v=S("dot-hover");return w((i(),h("div",{class:m(["relative inline-flex items-center gap-2 py-0 px-4 rounded-2xl h-11 md:h-12 md:transition-all select-none md:hover:shadow-2xl md:hover:transition-all hover:cursor-pointer group",{"bg-overlay":!o.chosen,"bg-blue-500":o.chosen}]),onTouch:f,onMousedown:f,onMouseenter:a,onMouseleave:n,ref_key:"label",ref:e},[l("div",O,[l("img",{class:m({white:o.chosen||o.darkfilter&&s(t)().theme==s(x).dark,brighter:s(t)().theme==s(x).dark&&!o.chosen}),src:`https://gitee.com/CatREFuse/img-base/raw/master/icons/${o.engine.iconName}`},null,10,X)]),l("p",{class:"font-bold text-main",style:E({color:o.chosen?"white !important":""})},z(o.engine.title),5)],34)),[[v]])}}});var ee=L(Z,[["__scopeId","data-v-9a09e758"]]);const te={class:"flex flex-row items-start p-0 gap-3 md:gap-4 flex-wrap w-full user-select-none"},se=_({setup(c){return(o,a)=>(i(),h("div",te,[(i(!0),h(I,null,P(s(t)().engines,(n,e)=>(i(),$(ee,{key:e,chosen:s(t)().engine.id==n.id,engine:n,darkfilter:["magi","Github","Unsplash","DeepL","Amazon","\u7EF4\u57FA\u767E\u79D1"].includes(n.title)},null,8,["chosen","engine","darkfilter"]))),128))]))}}),oe={key:0,id:"spacer",class:"flex-1"},re=["src"],ne=l("div",{id:"spacer",class:"flex-1"},null,-1),ae=_({setup(c){function o(a){t().switchEngineByAdd((a==null?void 0:a.shiftKey)?-1:1)}return(a,n)=>{const e=S("dot-hover");return i(),h("div",{class:"flex flex-col gap-8 md:gap-6 min-w-[256px]",style:E({"margin-top":s(t)().compactMode?"2rem":0}),onKeydown:n[1]||(n[1]=N(U(d=>o(d),["prevent"]),["tab"]))},[l("div",{class:m(["flex flex-row items-center",s(t)().compactMode?"mb-2":""])},[s(t)().compactMode?(i(),h("div",oe)):D("",!0),l("img",{src:s(t)().theme==s(x).light?"/assets/quasar_logo.svg":"/assets/quasar_logo_dark.svg",class:"w-40 md:w-60 select-none"},null,8,re),ne,w(C(F,{name:"bxs-cog",class:m(["opacity-30 text-secondary hover:cursor-pointer",s(t)().compactMode?"fixed top-2 right-2":"absolute right-2"]),size:"l",onClick:n[0]||(n[0]=d=>s(V).push("/preference"))},null,8,["class"]),[[e]])],2),C(Y,{iconName:s(t)().engine.iconName,"url-pattern":s(t)().engine.urlPattern},null,8,["iconName","url-pattern"]),s(t)().compactMode?D("",!0):(i(),$(se,{key:0}))],36)}}}),ue=_({setup(c){return(o,a)=>(i(),$(ae,{class:"w-full"}))}});export{ue as default};
