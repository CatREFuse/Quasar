import{b as h,r as M,x as D,y as C,w as S,e as w,f as p,g as m,h as u,k as E,z as q,u as c,A as x,i as v,t as $,o as L,n as A,F as W,B as I,C as k,j as B,D as K}from"./vendor.7ed62f3d.js";import{u as t}from"./index.db77c736.js";var R="./assets/quasar_logo.ebe1606d.svg",j="./assets/icon_right.6e42ab05.svg";var b=(i,n)=>{const o=i.__vccOpts||i;for(const[r,e]of n)o[r]=e;return o};const z={class:"container"},P={class:"input"},U=["src"],V=["placeholder"],O=h({props:{urlPattern:{type:String,default:"https://www.baidu.com/s?wd={query}",required:!1},iconName:{type:String,default:"baidu.svg",required:!1}},setup(i){const n=i;function o(){t().caret=!0}function r(){t().caret=!1}const e=M({tip:"",searchStr:"",placeholder:"",isComposing:!1});let a=D(()=>n.urlPattern.replace("{query}",e.searchStr));function l(){e.isComposing=!0}function _(){setTimeout(()=>{e.isComposing=!1},10)}function f(s){e.searchStr!=""&&(e.isComposing||(t().engine,t().postRecord(e.searchStr,t().engine),window.open(a.value,"_blank")))}const g=C(null);S(()=>t().engine,()=>{setTimeout(()=>{var s;return(s=g.value)==null?void 0:s.focus()},100)}),S(()=>e.searchStr,()=>{if(!e.searchStr.startsWith("\\")){for(let s of t().engines)if(e.searchStr==s.command||e.searchStr==s.title){e.tip=`\u6309\u4E0B\u7A7A\u683C\u9009\u62E9\u300C${s.title}\u300D ${s.loginRequire==1?" / \u9700\u8981\u767B\u5F55":""}`;break}else e.tip="";for(let s of t().engines)(e.searchStr.startsWith(s.command+" ")||e.searchStr.startsWith(s.title+" "))&&(t().selectEngine(s),e.searchStr="")}}),S(()=>t().hoverEngine,(s,d)=>{e.searchStr==""&&(s?e.placeholder=`\u8F93\u5165\u300C${s.command}\u300D\u53EF\u5FEB\u901F\u9009\u62E9\u300C${s.title}\u300D`:e.placeholder="Search for Your Quasar")});function N(){e.searchStr!=""}function F(){e.searchStr!=""&&(e.tip="")}return(s,d)=>{const T=w("dot-hover");return p(),m("div",z,[u("div",P,[u("img",{src:`https://gitee.com/CatREFuse/img-base/raw/master/icons/${i.iconName}`,class:"search-logo"},null,8,U),E(u("input",{type:"text",class:"text_input",placeholder:c(e).placeholder,onKeydown:d[0]||(d[0]=x(y=>f(),["enter"])),"onUpdate:modelValue":d[1]||(d[1]=y=>c(e).searchStr=y),ref_key:"input",ref:g,onMouseenter:o,onMouseleave:r,onCompositionstart:l,onCompositionend:_},null,40,V),[[q,c(e).searchStr]]),u("p",{class:"tip",style:v({color:c(e).tip=="\u70B9\u51FB\u4EE5\u641C\u7D22"?"var(--text-mian)":"var(--text-disabled)"})},$(c(e).tip),5),E(u("img",{src:j,class:"arrow",onClick:d[2]||(d[2]=y=>f()),style:v({opacity:c(e).searchStr==""?.3:1}),onMouseenter:N,onMouseleave:F,onCompositionstart:l,onCompositionend:_},null,36),[[T]])])])}}});var Q=b(O,[["__scopeId","data-v-03990768"]]);const Y={class:"logo-container"},G=["src"],H=h({props:{iconName:{default:"baidu.svg"},title:{default:"\u767E\u5EA6"},chosen:{type:Boolean,default:!1},index:null,engine:null},emits:["chose"],setup(i){const n=i;function o(){t().hoverEngine=n.engine}function r(){t().hoverEngine=void 0}const e=C(null),a=C(0);L(()=>{var _;a.value=((_=e.value)==null?void 0:_.clientWidth)||0});function l(){t().selectEngine(n.engine)}return(_,f)=>{const g=w("dot-hover");return E((p(),m("div",{class:"label",onClick:l,style:v({"background-color":n.chosen?"var(--accent-color)":"white"}),onMouseenter:o,onMouseleave:r,ref_key:"label",ref:e},[u("div",Y,[u("img",{class:A({white:n.chosen}),src:`https://gitee.com/CatREFuse/img-base/raw/master/icons/${n.iconName}`},null,10,G)]),u("p",{class:"title",style:v({color:n.chosen?"white":"var(--text-main)"})},$(n.title),5)],36)),[[g]])}}});var J=b(H,[["__scopeId","data-v-b0ad1898"]]);const X={class:"list"},Z=h({emits:["engine-change"],setup(i){function n(o,r){t().selectEngineByIndex(r)}return(o,r)=>(p(),m("div",X,[(p(!0),m(W,null,I(c(t)().engines,(e,a)=>{var l;return p(),k(J,{key:a,title:e.title,"icon-name":e.iconName,index:a,onChose:_=>n(_,a),chosen:((l=c(t)().engine)==null?void 0:l.title)==e.title,engine:e},null,8,["title","icon-name","index","onChose","chosen","engine"])}),128))]))}});var ee=b(Z,[["__scopeId","data-v-292a1516"]]);const te=u("img",{src:R,class:"logo"},null,-1),se=h({setup(i){function n(o){t().switchEngineByAdd((o==null?void 0:o.shiftKey)?-1:1)}return(o,r)=>{var e,a;return p(),m("div",{class:"search-container",onKeydown:r[0]||(r[0]=x(K(l=>n(l),["prevent"]),["tab"]))},[te,B(Q,{class:"search-bar",iconName:(e=c(t)().engine)==null?void 0:e.iconName,"url-pattern":(a=c(t)().engine)==null?void 0:a.urlPattern},null,8,["iconName","url-pattern"]),B(ee)],32)}}}),re=h({setup(i){return(n,o)=>(p(),k(se,{class:"search"}))}});export{re as default};
