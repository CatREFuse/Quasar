import{b as m,h as A,D as K,k as f,E as b,i as T,r as B,o as i,c as p,e as l,n as _,u as s,w as y,G as R,H as N,z as D,s as z,l as k,F as P,I as V,x as S,J as L,L as j}from"./vendor.b0c01671.js";import{_ as q,u as t,a as U,T as C}from"./index.8e485eef.js";const G=["src"],H=["placeholder"],J={class:"text-sm font-medium text-right whitespace-nowrap text-secondary relative left-3"},Q=m({props:{urlPattern:{type:String,default:"https://www.baidu.com/s?wd={query}",required:!1},iconName:{type:String,default:"baidu.svg",required:!1}},setup(c){const r=c;function o(){t().caret=!0}function a(){t().caret=!1}const e=A({tip:" ",searchStr:"",placeholder:"",isComposing:!1});let v=K(()=>r.urlPattern.replace("{query}",e.searchStr));function h(){e.isComposing=!0}function d(){setTimeout(()=>{e.isComposing=!1},10)}function w(n){if(e.searchStr=="#debug"){t().debug=!0;return}e.searchStr!=""&&(e.isComposing||(t().engine,t().postRecord(e.searchStr,t().engine),window.open(v.value,"_blank")))}const g=f(null);b(()=>t().engine,()=>{setTimeout(()=>{var n;return(n=g.value)==null?void 0:n.focus()},100)});const E=f(null);let $=f(100);T(()=>{window.addEventListener("scroll",()=>{$.value=E.value.getBoundingClientRect().top})}),b(()=>e.searchStr,()=>{if(!e.searchStr.startsWith("\\")){for(let n of t().engines)if(e.searchStr==n.command||e.searchStr==n.title){e.tip=`\u6309\u4E0B\u7A7A\u683C\u9009\u62E9\u300C${n.title}\u300D`;break}else e.tip=" ";for(let n of t().engines)(e.searchStr.startsWith(n.command+" ")||e.searchStr.startsWith(n.title+" "))&&(t().selectEngine(n),e.searchStr="")}}),b(()=>t().hoverEngine,(n,u)=>{e.searchStr==""&&(n?e.placeholder=`\u8F93\u5165\u300C${n.command}\u300D\u53EF\u9009\u62E9\u300C${n.title}\u300D`:e.placeholder="Search for Your Quasar")});function F(){e.searchStr!=""}function I(){e.searchStr!=""&&(e.tip="")}return(n,u)=>{var M;const W=B("dot-hover");return i(),p("div",{class:_(["inline-flex flex-row items-center h-14 w-full gap-2 py-0 pl-4 pr-2 rounded-[1rem] bg-overlay text-sm md:text-base align-middle sticky top-4 z-[500] transition-shadow border-zinc-200 dark:border-zinc-700 border-[0.5px]",{"shadow-2xl":s($)<=4*4}]),ref_key:"searchbar",ref:E},[l("img",{src:`https://gitee.com/CatREFuse/img-base/raw/master/icons/${c.iconName}`,class:_(["w-6 h-6 select-none shrink-0",{white:((M=s(t)().engine)==null?void 0:M.reverseInDark)==1}])},null,10,G),y(l("input",{type:"text",class:"h-12 font-bold w-full placeholder:text-zinc-400 placeholder:font-bold outline-none bg-overlay text-main",placeholder:s(e).placeholder,onKeydown:u[0]||(u[0]=N(x=>w(),["enter"])),"onUpdate:modelValue":u[1]||(u[1]=x=>s(e).searchStr=x),ref_key:"input",ref:g,onMouseenter:o,onMouseleave:a,onCompositionstart:h,onCompositionend:d,autocorrect:"off"},null,40,H),[[R,s(e).searchStr]]),l("p",J,D(s(e).tip),1),y(z(U,{name:"bx-right-arrow-alt",size:"l",class:"select-none hover:cursor-pointer text-main shrink-0",onClick:u[2]||(u[2]=x=>w()),style:k({opacity:s(e).searchStr==""?.3:1}),onMouseenter:F,onMouseleave:I,onCompositionstart:h,onCompositionend:d},null,8,["style"]),[[W]])],2)}}});var Y=q(Q,[["__scopeId","data-v-bf90c70c"]]);const O={class:"w-4 h-4 md:w-6 md:h-6 overflow-hidden"},X=["src"],Z=m({props:{iconName:{default:"baidu.svg"},title:{default:"\u767E\u5EA6"},chosen:{type:Boolean,default:!1},engine:null,darkfilter:{type:Boolean,default:!1}},emits:["chose"],setup(c){const r=c;function o(){t().hoverEngine=r.engine}function a(){t().hoverEngine=null}const e=f(null),v=f(0);T(()=>{var d;v.value=((d=e.value)==null?void 0:d.clientWidth)||0});function h(){t().selectEngine(r.engine)}return(d,w)=>{const g=B("dot-hover");return y((i(),p("div",{class:_(["relative inline-flex items-center gap-2 py-0 px-4 rounded-2xl h-11 md:h-12 md:transition-all select-none md:hover:shadow-2xl md:hover:transition-all hover:cursor-pointer group",{"bg-overlay":!r.chosen,"bg-blue-500":r.chosen}]),onTouch:h,onMousedown:h,onMouseenter:o,onMouseleave:a,ref_key:"label",ref:e},[l("div",O,[l("img",{class:_({white:r.chosen||r.darkfilter&&s(t)().theme==s(C).dark,brighter:s(t)().theme==s(C).dark&&!r.chosen}),src:`https://gitee.com/CatREFuse/img-base/raw/master/icons/${r.engine.iconName}`},null,10,X)]),l("p",{class:"font-bold text-main",style:k({color:r.chosen?"white !important":""})},D(r.engine.title),5)],34)),[[g]])}}});var ee=q(Z,[["__scopeId","data-v-1134b1f2"]]);const te={class:"flex flex-row items-start p-0 gap-3 md:gap-4 flex-wrap w-full user-select-none"},se=m({setup(c){return(r,o)=>(i(),p("div",te,[(i(!0),p(P,null,V(s(t)().engines,(a,e)=>(i(),S(ee,{key:e,chosen:s(t)().engine.id==a.id,engine:a,darkfilter:a.reverseInDark==1},null,8,["chosen","engine","darkfilter"]))),128))]))}}),re={key:0,id:"spacer",class:"flex-1"},ne=["src"],oe=l("div",{id:"spacer",class:"flex-1"},null,-1),ae=m({setup(c){function r(o){t().switchEngineByAdd((o==null?void 0:o.shiftKey)?-1:1)}return(o,a)=>(i(),p("div",{class:"flex flex-col gap-8 md:gap-6 min-w-[256px]",style:k({"margin-top":s(t)().compactMode?"2rem":0}),onKeydown:a[0]||(a[0]=N(j(e=>r(e),["prevent"]),["tab"]))},[l("div",{class:_(["flex flex-row items-center",s(t)().compactMode?"mb-2":""])},[s(t)().compactMode?(i(),p("div",re)):L("",!0),l("img",{src:s(t)().theme==s(C).light?"/assets/quasar_logo.svg":"/assets/quasar_logo_dark.svg",class:"w-40 md:w-60 select-none"},null,8,ne),oe],2),z(Y,{iconName:s(t)().engine.iconName,"url-pattern":s(t)().engine.urlPattern},null,8,["iconName","url-pattern"]),s(t)().compactMode?L("",!0):(i(),S(se,{key:0}))],36))}}),ce=m({setup(c){return(r,o)=>(i(),S(ae,{class:"w-full"}))}});export{ce as default};
