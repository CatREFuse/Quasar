import{b as m,l as L,D as R,p as f,m as S,k as T,r as C,o as u,c as _,e as i,v,u as s,w as x,E as W,G as D,t as F,s as E,x as k,F as K,H as j,z as M,I}from"./vendor.0cac3f45.js";import{_ as P}from"./box-icon.e066c630.js";import{_ as N,u as t,T as w,r as U}from"./index.b11d8df8.js";const G=["src"],V=["placeholder"],H=m({props:{urlPattern:{type:String,default:"https://www.baidu.com/s?wd={query}",required:!1},iconName:{type:String,default:"baidu.svg",required:!1}},setup(l){const n=l;function a(){t().caret=!0}function o(){t().caret=!1}const e=L({tip:"",searchStr:"",placeholder:"",isComposing:!1});let d=R(()=>n.urlPattern.replace("{query}",e.searchStr));function h(){e.isComposing=!0}function p(){setTimeout(()=>{e.isComposing=!1},10)}function y(r){e.searchStr!=""&&(e.isComposing||(t().engine,t().postRecord(e.searchStr,t().engine),window.open(d.value,"_blank")))}const g=f(null);S(()=>t().engine,()=>{setTimeout(()=>{var r;return(r=g.value)==null?void 0:r.focus()},100)});const $=f(null);let B=f(100);T(()=>{window.addEventListener("scroll",()=>{B.value=$.value.getBoundingClientRect().top})}),S(()=>e.searchStr,()=>{if(!e.searchStr.startsWith("\\")){for(let r of t().engines)if(e.searchStr==r.command||e.searchStr==r.title){e.tip=`\u6309\u4E0B\u7A7A\u683C\u9009\u62E9\u300C${r.title}\u300D ${r.loginRequire==1?" / \u9700\u8981\u767B\u5F55":""}`;break}else e.tip="";for(let r of t().engines)(e.searchStr.startsWith(r.command+" ")||e.searchStr.startsWith(r.title+" "))&&(t().selectEngine(r),e.searchStr="")}}),S(()=>t().hoverEngine,(r,c)=>{e.searchStr==""&&(r?e.placeholder=`\u8F93\u5165\u300C${r.command}\u300D\u53EF\u9009\u62E9\u300C${r.title}\u300D`:e.placeholder="Search for Your Quasar")});function q(){e.searchStr!=""}function z(){e.searchStr!=""&&(e.tip="")}return(r,c)=>{const A=C("dot-hover");return u(),_("div",{class:v(["inline-flex flex-row items-center h-14 w-full gap-2 py-0 pl-4 pr-2 rounded-[1rem] bg-overlay text-sm md:text-base align-middle sticky top-4 z-[500] transition-shadow",{"shadow-2xl":s(B)<=4*4}]),ref_key:"searchbar",ref:$},[i("img",{src:`https://gitee.com/CatREFuse/img-base/raw/master/icons/${l.iconName}`,class:v(["w-6 h-6 select-none",{white:s(t)().theme==s(w).dark}])},null,10,G),x(i("input",{type:"text",class:"h-14 font-bold w-full placeholder:text-zinc-500 placeholder:font-bold outline-none bg-overlay text-main",placeholder:s(e).placeholder,onKeydown:c[0]||(c[0]=D(b=>y(),["enter"])),"onUpdate:modelValue":c[1]||(c[1]=b=>s(e).searchStr=b),ref_key:"input",ref:g,onMouseenter:a,onMouseleave:o,onCompositionstart:h,onCompositionend:p,autocorrect:"off"},null,40,V),[[W,s(e).searchStr]]),i("p",{class:"text-xs font-medium text-right whitespace-nowrap",style:E({color:s(e).tip=="\u70B9\u51FB\u4EE5\u641C\u7D22"?"var(--text-mian)":"var(--text-disabled)"})},F(s(e).tip),5),x(k(P,{name:"bx-right-arrow-alt",size:"l",class:"select-none hover:cursor-pointer text-secondary",onClick:c[2]||(c[2]=b=>y()),style:E({opacity:s(e).searchStr==""?.3:1}),onMouseenter:q,onMouseleave:z,onCompositionstart:h,onCompositionend:p},null,8,["style"]),[[A]])],2)}}});var Q=N(H,[["__scopeId","data-v-c23237cc"]]);const Y={class:"w-4 h-4 md:w-6 md:h-6 overflow-hidden"},J=["src"],O=m({props:{iconName:{default:"baidu.svg"},title:{default:"\u767E\u5EA6"},chosen:{type:Boolean,default:!1},engine:null,darkfilter:{type:Boolean,default:!1}},emits:["chose"],setup(l){const n=l;function a(){t().hoverEngine=n.engine}function o(){t().hoverEngine=null}const e=f(null),d=f(0);T(()=>{var p;d.value=((p=e.value)==null?void 0:p.clientWidth)||0});function h(){t().selectEngine(n.engine)}return(p,y)=>{const g=C("dot-hover");return x((u(),_("div",{class:v(["relative inline-flex items-center gap-2 py-0 px-4 rounded-2xl h-11 md:h-12 md:transition-all select-none md:hover:shadow-2xl md:hover:transition-all hover:cursor-pointer group",{"bg-overlay":!n.chosen,"bg-sky-500":n.chosen}]),onTouch:h,onMousedown:h,onMouseenter:a,onMouseleave:o,ref_key:"label",ref:e},[i("div",Y,[i("img",{class:v({white:n.chosen||n.darkfilter&&s(t)().theme==s(w).dark,brighter:s(t)().theme==s(w).dark&&!n.chosen}),src:`https://gitee.com/CatREFuse/img-base/raw/master/icons/${n.engine.iconName}`},null,10,J)]),i("p",{class:"font-bold text-main",style:E({color:n.chosen?"white !important":""})},F(n.engine.title),5)],34)),[[g]])}}});var X=N(O,[["__scopeId","data-v-ace7e83e"]]);const Z={class:"flex flex-row items-start p-0 gap-3 md:gap-4 flex-wrap w-full user-select-none"},ee=m({setup(l){return(n,a)=>(u(),_("div",Z,[(u(!0),_(K,null,j(s(t)().engines,(o,e)=>(u(),M(X,{key:e,chosen:s(t)().engine.id==o.id,engine:o,darkfilter:["magi","Github","Unsplash","DeepL","Amazon","\u7EF4\u57FA\u767E\u79D1"].includes(o.title)},null,8,["chosen","engine","darkfilter"]))),128))]))}}),te={class:"flex flex-row items-center pr-2"},se=["src"],re=i("div",{id:"spacer",class:"flex-1"},null,-1),ne=m({setup(l){function n(a){t().switchEngineByAdd((a==null?void 0:a.shiftKey)?-1:1)}return(a,o)=>{const e=C("dot-hover");return u(),_("div",{class:"flex flex-col gap-4 md:gap-6 min-w-[256px]",onKeydown:o[1]||(o[1]=D(I(d=>n(d),["prevent"]),["tab"]))},[i("div",te,[i("img",{src:s(t)().theme==s(w).light?"/assets/quasar_logo.svg":"/assets/quasar_logo_dark.svg",class:"w-40 md:w-60 select-none"},null,8,se),re,x(i("i",{class:"bx bxs-cog h-[1.75rem] w-[1.75rem] hover:cursor-pointer text-[1.75rem] opacity-30 text-secondary",onClick:o[0]||(o[0]=d=>s(U).push("/preference"))},null,512),[[e]])]),k(Q,{iconName:s(t)().engine.iconName,"url-pattern":s(t)().engine.urlPattern},null,8,["iconName","url-pattern"]),k(ee)],32)}}}),le=m({setup(l){return(n,a)=>(u(),M(ne,{class:"w-full"}))}});export{le as default};
