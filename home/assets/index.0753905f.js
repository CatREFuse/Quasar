var q=Object.defineProperty;var R=(t,e,s)=>e in t?q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var h=(t,e,s)=>(R(t,typeof e!="symbol"?e+"":e,s),s);import{d as A,a as k,b as B,o as E,r as C,w as T,c as D,e as P,f as g,g as _,h as l,n as M,u as c,i as x,j as N,k as p,t as w,l as S,m as f,p as O,q as $,s as j,v as H}from"./vendor.a0eafc3a.js";const V=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}};V();const F="modulepreload",I={},W="./",b=function(e,s){return!s||s.length===0?e():Promise.all(s.map(n=>{if(n=`${W}${n}`,n in I)return;I[n]=!0;const r=n.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${a}`))return;const i=document.createElement("link");if(i.rel=r?"stylesheet":F,r||(i.as="script",i.crossOrigin=""),i.href=n,document.head.appendChild(i),r)return new Promise((d,u)=>{i.addEventListener("load",d),i.addEventListener("error",u)})})).then(()=>e())};var z="./assets/quasar_logo_bg.20a7d8f1.svg";class Y{constructor(e,s,n,r,a,i,d){h(this,"id");h(this,"title");h(this,"iconName");h(this,"command");h(this,"loginRequire");h(this,"urlPattern");h(this,"tags");this.id=i,this.title=e,this.iconName=s,this.command=n,this.loginRequire=r,this.urlPattern=a,this.tags=d}}var v;(function(t){t.phone="phone",t.desktop="desktop"})(v||(v={}));var y;(function(t){t.light="light",t.dark="dark"})(y||(y={}));var o=A({id:"app",state(){return{engine:new Y("","","",0,"",0,""),engines:[],hover:!1,mousedown:!1,caret:!1,debug:!1,deviceClass:v.desktop,systemTheme:y.light}},actions:{async doSearch(t){var s;const e=(s=this.engine)==null?void 0:s.urlPattern.replace("{query}",t);await this.postRecord(t,this.engine),window.location.href=e||" "},async postRecord(t,e){await k.post("https://api.catrefuse.com/add-record",{title:e.title,url_pattern:e.urlPattern,engine_id:e.id,tags:e.tags,search_string:t}).then(s=>{}).catch(s=>console.error(s))},switchEngineByAdd(t){var s;let e=0;for(let n=0;n<this.engines.length;n++)this.engines[n].title==((s=this.engine)==null?void 0:s.title)&&(e=n);e=e+t,e>=this.engines.length?e=e-this.engines.length:e<0&&(e=e+this.engines.length),this.engine=this.engines[e]},selectEngine(t){this.engine=t},selectEngineByIndex(t){this.engine=this.engines[t]},selectEngineByTitle(t){for(let e of this.engines)if(e.title==t){this.engine=e;break}},selectEngineByCommand(t){for(let e of this.engines)if(e.command==t){this.engine=e;break}}}});function G(){k.get("https://cdn.catrefuse.com/engines.json").then(t=>{o().engines=t.data,o().engine=t.data[0]}).catch(t=>{console.error(t.message)})}const K={class:"main-container"},Q={class:"debugger"},U={key:0},X=l("h3",null,"debugger",-1),Z={key:0,class:"footer"},J=f(" \xA9 2020 - 2021 \u{1F353} "),ee={href:"http:///bad-strawberry.com",target:"_blank"},te=f("Bad Strawberry"),se=[te],ne=f(". All rights reserved. "),re={href:"https://www.craft.do/s/Gi8HESIcZQsSIY",target:"_blank"},oe=f("\u7528\u6237\u534F\u8BAE"),ie=[oe],ae=f(" \xB7 "),ce={href:"https://beian.miit.gov.cn/#/Integrated/index",target:"_blank"},le=f("\u6D59 ICP \u5907 2020033146 \u53F7 - 2"),de=[le],ue=B({setup(t){function e(){o().deviceClass=window.innerWidth>=700?v.desktop:v.phone}function s(){o().systemTheme=window.matchMedia("(prefers-color-scheme: dark)").matches?y.dark:y.light}E(()=>{e(),window.addEventListener("resize",()=>{e()}),s(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{s()})});const n=C({cursor:{x:0,y:0},visualCursor:{x:0,y:0}}),r=C({grow:1,degree:0});T(()=>n.visualCursor,(i,d)=>{const u={x:i.x-d.x,y:i.y-d.y},m=Math.sqrt(u.x*u.x+u.y*u.y);r.grow=Math.min(Math.max(m/20,1),2),r.degree=Math.atan2(u.y,u.x)*180/Math.PI}),E(()=>{G(),document.onmousemove=function(d){n.cursor={x:d.clientX,y:d.clientY}},document.onmousedown=()=>{o().mousedown=!0},document.onmouseup=()=>{o().mousedown=!1},setInterval(()=>{n.visualCursor={x:n.cursor.x,y:n.cursor.y}},50)});function a(){o().debug=!o().debug}return(i,d)=>{const u=D("router-view"),m=P("dot-hover"),L=P("text-hover");return g(),_("div",K,[l("div",{class:"cursor-container",style:x({transform:`translate(${c(n).visualCursor.x-25}px,${c(n).visualCursor.y-25}px)`})},[l("div",{class:M({cursor:!0,hover:c(o)().hover,clicked:c(o)().mousedown,caret:c(o)().caret}),style:x({transform:c(o)().caret?"none":`rotate(${c(r).degree}deg) scale(${c(r).grow}, 1)  `})},null,6)],4),N(u),l("img",{class:"bg_img",src:z,style:x({transform:"none"})},null,4),l("div",Q,[p(l("div",{class:"debug-trigger",onClick:a},null,512),[[m]]),c(o)().debug?(g(),_("div",U,[X,l("p",null,"cursor: "+w(c(n).cursor.x)+", "+w(c(n).cursor.y),1),l("p",null,"deviceClass: "+w(c(o)().deviceClass),1),l("p",null,"systemTheme: "+w(c(o)().systemTheme),1)])):S("",!0)]),c(o)().debug?S("",!0):p((g(),_("div",Z,[l("p",null,[J,p((g(),_("a",ee,se)),[[m]]),ne]),l("p",null,[p((g(),_("a",re,ie)),[[m]]),ae,p((g(),_("a",ce,de)),[[m]])])])),[[L]])])}}});function he(t){t.directive("dot-hover",(e,s)=>{e.onmouseenter=()=>{o().hover=s.value==null?!0:!s.value},e.onmouseleave=()=>{o().hover=!1}}),t.directive("text-hover",{mounted(e,s){e.onmouseenter=()=>{o().caret=!0},e.onmouseleave=()=>{o().caret=!1}}})}const me=[{path:"/",name:"Home",component:()=>b(()=>import("./Home.7ac51d34.js"),["assets/Home.7ac51d34.js","assets/Home.0c0d48ef.css","assets/vendor.a0eafc3a.js"])},{path:"/search",name:"SearchRedirect",component:()=>b(()=>import("./SearchRedrirect.70f5d0e0.js"),["assets/SearchRedrirect.70f5d0e0.js","assets/vendor.a0eafc3a.js"]),props:t=>({query:t.query.query,engine:t.query.engine})}],ge=O({history:$(),routes:me});b(()=>Promise.resolve({}),["assets/transition.f598f98a.css"]);const _e=j(ue);_e.use(he).use(ge).use(H()).mount("#app");export{o as u};
