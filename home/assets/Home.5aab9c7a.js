import{b as h,r as M,x as D,y as S,w as E,e as x,f as p,g as m,h as d,k as b,z as q,u as l,A as $,i as g,t as k,a as L,o as A,n as W,F as I,B as K,C as B,j as N,D as P}from"./vendor.7ed62f3d.js";import{u as n}from"./index.3646c9b1.js";var j="./assets/quasar_logo.ebe1606d.svg",z="./assets/icon_right.6e42ab05.svg";var w=(i,o)=>{const r=i.__vccOpts||i;for(const[a,e]of o)r[a]=e;return r};const R={class:"container"},U={class:"input"},V=["src"],O=["placeholder"],Q=h({props:{urlPattern:{type:String,default:"https://www.baidu.com/s?wd={query}",required:!1},iconName:{type:String,default:"baidu.svg",required:!1}},setup(i){const o=i;function r(){n().caret=!0}function a(){n().caret=!1}const e=M({tip:"",searchStr:"",placeholder:"",isComposing:!1});let c=D(()=>o.urlPattern.replace("{query}",e.searchStr));function u(){e.isComposing=!0}function _(){setTimeout(()=>{e.isComposing=!1},10)}function y(s){if(e.searchStr!=""&&!e.isComposing){const t=n().engine;L.post("https://api.catrefuse.com/add-record",{title:t==null?void 0:t.title,url_pattern:t==null?void 0:t.urlPattern,engine_id:t==null?void 0:t.id,tags:t==null?void 0:t.tags,search_string:e.searchStr}).then(v=>{}).catch(v=>console.error(v)),window.open(c.value,"_blank")}}const f=S(null);E(()=>n().engine,()=>{setTimeout(()=>{var s;return(s=f.value)==null?void 0:s.focus()},100)}),E(()=>e.searchStr,()=>{if(!e.searchStr.startsWith("\\")){for(let s of n().engines)if(e.searchStr==s.command||e.searchStr==s.title){e.tip=`\u6309\u4E0B\u7A7A\u683C\u9009\u62E9\u300C${s.title}\u300D ${s.loginRequire==1?" / \u9700\u8981\u767B\u5F55":""}`;break}else e.tip="";for(let s of n().engines)(e.searchStr.startsWith(s.command+" ")||e.searchStr.startsWith(s.title+" "))&&(n().selectEngine(s),e.searchStr="")}}),E(()=>n().hoverEngine,(s,t)=>{e.searchStr==""&&(s?e.placeholder=`\u8F93\u5165\u300C${s.command}\u300D\u53EF\u5FEB\u901F\u9009\u62E9\u300C${s.title}\u300D`:e.placeholder="Search for Your Quasar")});function F(){e.searchStr!=""}function T(){e.searchStr!=""&&(e.tip="")}return(s,t)=>{const v=x("dot-hover");return p(),m("div",R,[d("div",U,[d("img",{src:`https://gitee.com/CatREFuse/img-base/raw/master/icons/${i.iconName}`,class:"search-logo"},null,8,V),b(d("input",{type:"text",class:"text_input",placeholder:l(e).placeholder,onKeydown:t[0]||(t[0]=$(C=>y(),["enter"])),"onUpdate:modelValue":t[1]||(t[1]=C=>l(e).searchStr=C),ref_key:"input",ref:f,onMouseenter:r,onMouseleave:a,onCompositionstart:u,onCompositionend:_},null,40,O),[[q,l(e).searchStr]]),d("p",{class:"tip",style:g({color:l(e).tip=="\u70B9\u51FB\u4EE5\u641C\u7D22"?"var(--text-mian)":"var(--text-disabled)"})},k(l(e).tip),5),b(d("img",{src:z,class:"arrow",onClick:t[2]||(t[2]=C=>y()),style:g({opacity:l(e).searchStr==""?.3:1}),onMouseenter:F,onMouseleave:T,onCompositionstart:u,onCompositionend:_},null,36),[[v]])])])}}});var Y=w(Q,[["__scopeId","data-v-7028ccdc"]]);const G={class:"logo-container"},H=["src"],J=h({props:{iconName:{default:"baidu.svg"},title:{default:"\u767E\u5EA6"},chosen:{type:Boolean,default:!1},index:null,engine:null},emits:["chose"],setup(i){const o=i;function r(){n().hoverEngine=o.engine}function a(){n().hoverEngine=void 0}const e=S(null),c=S(0);A(()=>{var _;c.value=((_=e.value)==null?void 0:_.clientWidth)||0});function u(){n().selectEngine(o.engine)}return(_,y)=>{const f=x("dot-hover");return b((p(),m("div",{class:"label",onClick:u,style:g({"background-color":o.chosen?"var(--accent-color)":"white"}),onMouseenter:r,onMouseleave:a,ref_key:"label",ref:e},[d("div",G,[d("img",{class:W({white:o.chosen}),src:`https://gitee.com/CatREFuse/img-base/raw/master/icons/${o.iconName}`},null,10,H)]),d("p",{class:"title",style:g({color:o.chosen?"white":"var(--text-main)"})},k(o.title),5)],36)),[[f]])}}});var X=w(J,[["__scopeId","data-v-b0ad1898"]]);const Z={class:"list"},ee=h({emits:["engine-change"],setup(i){function o(r,a){n().selectEngineByIndex(a)}return(r,a)=>(p(),m("div",Z,[(p(!0),m(I,null,K(l(n)().engines,(e,c)=>{var u;return p(),B(X,{key:c,title:e.title,"icon-name":e.iconName,index:c,onChose:_=>o(_,c),chosen:((u=l(n)().engine)==null?void 0:u.title)==e.title,engine:e},null,8,["title","icon-name","index","onChose","chosen","engine"])}),128))]))}});var te=w(ee,[["__scopeId","data-v-292a1516"]]);const se=d("img",{src:j,class:"logo"},null,-1),ne=h({setup(i){function o(r){n().switchEngineByAdd((r==null?void 0:r.shiftKey)?-1:1)}return(r,a)=>{var e,c;return p(),m("div",{class:"search-container",onKeydown:a[0]||(a[0]=$(P(u=>o(u),["prevent"]),["tab"]))},[se,N(Y,{class:"search-bar",iconName:(e=l(n)().engine)==null?void 0:e.iconName,"url-pattern":(c=l(n)().engine)==null?void 0:c.urlPattern},null,8,["iconName","url-pattern"]),N(te)],32)}}}),ae=h({setup(i){return(o,r)=>(p(),B(ne,{class:"search"}))}});export{ae as default};
