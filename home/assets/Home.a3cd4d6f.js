import{e as m,r as R,C as W,g as f,w as y,o as $,i as C,j as u,k as g,l as a,t as v,D as j,u as i,E as k,v as B,n as w,m as T,F as A,G as K,y as M,q as N,H as L}from"./vendor.9ca8bf48.js";import"./boxicons.a9512751.js";import{u as t,r as z}from"./index.83759af0.js";var P="./assets/quasar_logo.ebe1606d.svg",U="./assets/icon_right.6e42ab05.svg";const V=["src"],G=["placeholder"],H=m({props:{urlPattern:{type:String,default:"https://www.baidu.com/s?wd={query}",required:!1},iconName:{type:String,default:"baidu.svg",required:!1}},setup(l){const o=l;function n(){t().caret=!0}function r(){t().caret=!1}const e=R({tip:"",searchStr:"",placeholder:"",isComposing:!1});let d=W(()=>o.urlPattern.replace("{query}",e.searchStr));function h(){e.isComposing=!0}function p(){setTimeout(()=>{e.isComposing=!1},10)}function x(s){e.searchStr!=""&&(e.isComposing||(t().engine,t().postRecord(e.searchStr,t().engine),window.open(d.value,"_blank")))}const _=f(null);y(()=>t().engine,()=>{setTimeout(()=>{var s;return(s=_.value)==null?void 0:s.focus()},100)});const S=f(null);let E=f(100);$(()=>{window.addEventListener("scroll",()=>{E.value=S.value.getBoundingClientRect().top})}),y(()=>e.searchStr,()=>{if(!e.searchStr.startsWith("\\")){for(let s of t().engines)if(e.searchStr==s.command||e.searchStr==s.title){e.tip=`\u6309\u4E0B\u7A7A\u683C\u9009\u62E9\u300C${s.title}\u300D ${s.loginRequire==1?" / \u9700\u8981\u767B\u5F55":""}`;break}else e.tip="";for(let s of t().engines)(e.searchStr.startsWith(s.command+" ")||e.searchStr.startsWith(s.title+" "))&&(t().selectEngine(s),e.searchStr="")}}),y(()=>t().hoverEngine,(s,c)=>{e.searchStr==""&&(s?e.placeholder=`\u8F93\u5165\u300C${s.command}\u300D\u53EF\u9009\u62E9\u300C${s.title}\u300D`:e.placeholder="Search for Your Quasar")});function D(){e.searchStr!=""}function F(){e.searchStr!=""&&(e.tip="")}return(s,c)=>{const q=C("dot-hover");return u(),g("div",{class:T(["inline-flex flex-row items-center h-14 w-full gap-2 py-0 pl-4 pr-2 rounded-[1rem] bg-white text-sm md:text-base align-middle sticky top-4 z-[500] transition-shadow",{"shadow-2xl":i(E)<=4*4}]),ref_key:"searchbar",ref:S},[a("img",{src:`https://gitee.com/CatREFuse/img-base/raw/master/icons/${l.iconName}`,class:"w-6 h-6 select-none"},null,8,V),v(a("input",{type:"text",class:"h-14 font-bold w-full placeholder:text-gray-300 placeholder:font-bold outline-none",placeholder:i(e).placeholder,onKeydown:c[0]||(c[0]=k(b=>x(),["enter"])),"onUpdate:modelValue":c[1]||(c[1]=b=>i(e).searchStr=b),ref_key:"input",ref:_,onMouseenter:n,onMouseleave:r,onCompositionstart:h,onCompositionend:p,autocorrect:"off"},null,40,G),[[j,i(e).searchStr]]),a("p",{class:"text-xs font-medium text-right whitespace-nowrap",style:w({color:i(e).tip=="\u70B9\u51FB\u4EE5\u641C\u7D22"?"var(--text-mian)":"var(--text-disabled)"})},B(i(e).tip),5),v(a("img",{src:U,class:"select-none hover:cursor-pointer w-8 h-8",onClick:c[2]||(c[2]=b=>x()),style:w({opacity:i(e).searchStr==""?.3:1}),onMouseenter:D,onMouseleave:F,onCompositionstart:h,onCompositionend:p},null,36),[[q]])],2)}}});var I=(l,o)=>{const n=l.__vccOpts||l;for(const[r,e]of o)n[r]=e;return n};const O={class:"w-4 h-4 md:w-6 md:h-6 overflow-hidden"},Q=["src"],Y=m({props:{iconName:{default:"baidu.svg"},title:{default:"\u767E\u5EA6"},chosen:{type:Boolean,default:!1},engine:null},emits:["chose"],setup(l){const o=l;function n(){t().hoverEngine=o.engine}function r(){t().hoverEngine=null}const e=f(null),d=f(0);$(()=>{var p;d.value=((p=e.value)==null?void 0:p.clientWidth)||0});function h(){t().selectEngine(o.engine)}return(p,x)=>{const _=C("dot-hover");return v((u(),g("div",{class:"relative inline-flex items-center gap-2 py-0 px-4 bg-white rounded-2xl h-11 md:h-12 md:transition-all select-none md:hover:shadow-2xl md:hover:transition-all hover:cursor-pointer group",onTouch:h,onMousedown:h,style:w({"background-color":o.chosen?"var(--accent-color)":"white"}),onMouseenter:n,onMouseleave:r,ref_key:"label",ref:e},[a("div",O,[a("img",{class:T({white:o.chosen}),src:`https://gitee.com/CatREFuse/img-base/raw/master/icons/${o.engine.iconName}`},null,10,Q)]),a("p",{class:"font-bold text-base md:text[17px]",style:w({color:o.chosen?"white":"var(--text-main)"})},B(o.engine.title),5)],36)),[[_]])}}});var J=I(Y,[["__scopeId","data-v-e01f8158"]]);const X={class:"flex flex-row items-start p-0 gap-3 md:gap-4 flex-wrap w-full user-select-none"},Z=m({setup(l){return(o,n)=>(u(),g("div",X,[(u(!0),g(A,null,K(i(t)().engines,(r,e)=>(u(),M(J,{key:e,chosen:i(t)().engine.id==r.id,engine:r},null,8,["chosen","engine"]))),128))]))}}),ee={class:"flex flex-row items-center pr-2"},te=a("img",{src:P,class:"w-40 md:w-60 select-none"},null,-1),se=a("div",{id:"spacer",class:"flex-1"},null,-1),oe=m({setup(l){function o(n){t().switchEngineByAdd((n==null?void 0:n.shiftKey)?-1:1)}return(n,r)=>{const e=C("dot-hover");return u(),g("div",{class:"flex flex-col gap-4 md:gap-6 min-w-[256px]",onKeydown:r[1]||(r[1]=k(L(d=>o(d),["prevent"]),["tab"]))},[a("div",ee,[te,se,v(a("i",{class:"bx bxs-cog h-[1.75rem] w-[1.75rem] hover:cursor-pointer text-[1.75rem] opacity-30",onClick:r[0]||(r[0]=d=>i(z).push("/preference"))},null,512),[[e]])]),N(H,{iconName:i(t)().engine.iconName,"url-pattern":i(t)().engine.urlPattern},null,8,["iconName","url-pattern"]),N(Z)],32)}}}),ae=m({setup(l){return(o,n)=>(u(),M(oe,{class:"w-full"}))}});export{ae as default};
