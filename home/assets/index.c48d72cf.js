var K=Object.defineProperty;var O=(o,t,s)=>t in o?K(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s;var m=(o,t,s)=>(O(o,typeof t!="symbol"?t+"":t,s),s);import{d as R,a as v,r as B,c as W,b as N,w as x,e as w,o as _,f as g,g as u,h as p,v as j,u as c,i as I,n as f,t as C,j as q,k as E,l as A,F as z,m as Q,p as T,q as M,s as U,x as L,y,z as Y,A as H}from"./vendor.905189d2.js";const V=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}};V();var G="./assets/quasar_logo_bg.20a7d8f1.svg",X="./assets/quasar_logo.ebe1606d.svg",Z="./assets/icon_right.6e42ab05.svg";class J{constructor(t,s,a,e,r,i,h){m(this,"id");m(this,"title");m(this,"iconName");m(this,"command");m(this,"loginRequire");m(this,"urlPattern");m(this,"tags");this.id=i,this.title=t,this.iconName=s,this.command=a,this.loginRequire=e,this.urlPattern=r,this.tags=h}}var n=R({id:"app",state(){return{engine:new J("","","",0,"",0,""),engines:[],hover:!1,mousedown:!1,caret:!1,debug:!1}},actions:{switchEngineByAdd(o){var s;let t=0;for(let a=0;a<this.engines.length;a++)this.engines[a].title==((s=this.engine)==null?void 0:s.title)&&(t=a);t=t+o,t>=this.engines.length?t=t-this.engines.length:t<0&&(t=t+this.engines.length),this.engine=this.engines[t]},selectEngine(o){this.engine=o},selectEngineByIndex(o){this.engine=this.engines[o]},selectEngineByTitle(o){for(let t of this.engines)if(t.title==o){this.engine=t;break}},selectEngineByCommand(o){for(let t of this.engines)if(t.command==o){this.engine=t;break}}}});var F=(o,t)=>{const s=o.__vccOpts||o;for(const[a,e]of t)s[a]=e;return s};const ee={class:"container"},te={class:"input"},se=["src"],ne=["placeholder"],oe=v({props:{urlPattern:{type:String,default:"https://www.baidu.com/s?wd={query}",required:!1},iconName:{type:String,default:"baidu.svg",required:!1}},setup(o){const t=o;function s(){n().caret=!0}function a(){n().caret=!1}const e=B({tip:"",searchStr:"",placeholder:"",isComposing:!1});let r=W(()=>t.urlPattern.replace("{query}",e.searchStr));function i(){e.isComposing=!0}function h(){setTimeout(()=>{e.isComposing=!1},10)}function S(d){if(e.searchStr!=""&&(console.log(e.isComposing),!e.isComposing)){const l=n().engine;q.post("http://127.0.0.1:5000/add-record",{title:l==null?void 0:l.title,url_pattern:l==null?void 0:l.urlPattern,engine_id:l==null?void 0:l.id,tags:l==null?void 0:l.tags,search_string:e.searchStr}).then().catch($=>console.error($)),window.open(r.value,"_blank")}}const b=N(null);x(()=>n().engine,()=>{setTimeout(()=>{var d;return(d=b.value)==null?void 0:d.focus()},100)}),x(()=>e.searchStr,()=>{if(!e.searchStr.startsWith("\\")){for(let d of n().engines)if(e.searchStr==d.command||e.searchStr==d.title){e.tip=`\u6309\u4E0B\u7A7A\u683C\u9009\u62E9\u300C${d.title}\u300D ${d.loginRequire==1?" / \u9700\u8981\u767B\u5F55":""}`;break}else e.tip="";for(let d of n().engines)(e.searchStr.startsWith(d.command+" ")||e.searchStr.startsWith(d.title+" "))&&(n().selectEngine(d),e.searchStr="")}}),x(()=>n().hoverEngine,(d,l)=>{e.searchStr==""&&(d?e.placeholder=`\u8F93\u5165\u300C${d.command}\u300D\u53EF\u5FEB\u901F\u9009\u62E9\u300C${d.title}\u300D`:e.placeholder="Search for Your Quasar")});function P(){e.searchStr!=""}function D(){e.searchStr!=""&&(e.tip="")}return(d,l)=>{const $=w("dot-hover");return _(),g("div",ee,[u("div",te,[u("img",{src:`https://gitee.com/CatREFuse/img-base/raw/master/icons/${o.iconName}`,class:"search-logo"},null,8,se),p(u("input",{type:"text",class:"text_input",placeholder:c(e).placeholder,onKeydown:l[0]||(l[0]=I(k=>S(),["enter"])),"onUpdate:modelValue":l[1]||(l[1]=k=>c(e).searchStr=k),ref_key:"input",ref:b,onMouseenter:s,onMouseleave:a,onCompositionstart:i,onCompositionend:h},null,40,ne),[[j,c(e).searchStr]]),u("p",{class:"tip",style:f({color:c(e).tip=="\u70B9\u51FB\u4EE5\u641C\u7D22"?"var(--text-mian)":"var(--text-disabled)"})},C(c(e).tip),5),p(u("img",{src:Z,class:"arrow",onClick:l[2]||(l[2]=k=>S()),style:f({opacity:c(e).searchStr==""?.3:1}),onMouseenter:P,onMouseleave:D,onCompositionstart:i,onCompositionend:h},null,36),[[$]])])])}}});var re=F(oe,[["__scopeId","data-v-7548cb2c"]]);const ie={class:"logo-container"},ae=["src"],ce=v({props:{iconName:{default:"baidu.svg"},title:{default:"\u767E\u5EA6"},chosen:{type:Boolean,default:!1},index:null,engine:null},emits:["chose"],setup(o){const t=o;function s(){n().hoverEngine=t.engine}function a(){n().hoverEngine=void 0}const e=N(null),r=N(0);E(()=>{var h;r.value=((h=e.value)==null?void 0:h.clientWidth)||0});function i(){n().selectEngine(t.engine)}return(h,S)=>{const b=w("dot-hover");return p((_(),g("div",{class:"label",onClick:i,style:f({"background-color":t.chosen?"var(--accent-color)":"white"}),onMouseenter:s,onMouseleave:a,ref_key:"label",ref:e},[u("div",ie,[u("img",{class:A({white:t.chosen}),src:`https://gitee.com/CatREFuse/img-base/raw/master/icons/${t.iconName}`},null,10,ae)]),u("p",{class:"title",style:f({color:t.chosen?"white":"var(--text-main)"})},C(t.title),5)],36)),[[b]])}}});var le=F(ce,[["__scopeId","data-v-b0ad1898"]]);const ue={class:"list"},de=v({emits:["engine-change"],setup(o){E(()=>{q.get("./engines.json").then(s=>{n().engines=s.data,n().engine=s.data[0]}).catch(s=>{alert(s)})});function t(s,a){n().selectEngineByIndex(a)}return(s,a)=>(_(),g("div",ue,[(_(!0),g(z,null,Q(c(n)().engines,(e,r)=>{var i;return _(),T(le,{key:r,title:e.title,"icon-name":e.iconName,index:r,onChose:h=>t(h,r),chosen:((i=c(n)().engine)==null?void 0:i.title)==e.title,engine:e},null,8,["title","icon-name","index","onChose","chosen","engine"])}),128))]))}});var he=F(de,[["__scopeId","data-v-ec2619b8"]]);const _e=u("img",{src:X,class:"logo"},null,-1),ge=v({setup(o){function t(s){n().switchEngineByAdd((s==null?void 0:s.shiftKey)?-1:1)}return(s,a)=>{var e,r;return _(),g("div",{class:"search-container",onKeydown:a[0]||(a[0]=I(U(i=>t(i),["prevent"]),["tab"]))},[_e,M(re,{class:"search-bar",iconName:(e=c(n)().engine)==null?void 0:e.iconName,"url-pattern":(r=c(n)().engine)==null?void 0:r.urlPattern},null,8,["iconName","url-pattern"]),M(he)],32)}}}),me=v({setup(o){return(t,s)=>(_(),T(ge,{class:"search"}))}});const pe={class:"main-container"},fe={class:"debugger"},ve={key:0},ye=u("h3",null,"debugger",-1),be={key:0,class:"footer"},xe=y(" \xA9 2020 - 2021 \u{1F353} "),we={href:"http:///bad-strawberry.com",target:"_blank"},Ce=y("Bad Strawberry"),Ee=[Ce],Se=y(", All rights reserved. "),$e={href:"https://www.craft.do/s/Gi8HESIcZQsSIY",target:"_blank"},ke=y("\u7528\u6237\u534F\u8BAE"),Be=[ke],Ne=y(" \xB7 "),Me={href:"https://beian.miit.gov.cn/#/Integrated/index",target:"_blank"},Fe=y("\u6D59 ICP \u5907 2020033146 \u53F7"),Ie=[Fe],qe=v({setup(o){E(()=>{document.title="Quasar"});const t=B({cursor:{x:0,y:0},visualCursor:{x:0,y:0}}),s=B({grow:1,degree:0});x(()=>t.visualCursor,(e,r)=>{const i={x:e.x-r.x,y:e.y-r.y},h=Math.sqrt(i.x*i.x+i.y*i.y);s.grow=Math.min(Math.max(h/20,1),2),s.degree=Math.atan2(i.y,i.x)*180/Math.PI}),E(()=>{document.onmousemove=function(r){t.cursor={x:r.clientX,y:r.clientY}},document.onmousedown=()=>{n().mousedown=!0},document.onmouseup=()=>{n().mousedown=!1},setInterval(()=>{t.visualCursor={x:t.cursor.x,y:t.cursor.y}},50)});function a(){n().debug=!n().debug}return(e,r)=>{const i=w("dot-hover"),h=w("text-hover");return _(),g("div",pe,[u("div",{class:"cursor-container",style:f({transform:`translate(${c(t).visualCursor.x-25}px,${c(t).visualCursor.y-25}px)`})},[u("div",{class:A({cursor:!0,hover:c(n)().hover,clicked:c(n)().mousedown,caret:c(n)().caret}),style:f({transform:c(n)().caret?"none":`rotate(${c(s).degree}deg) scale(${c(s).grow}, 1)  `})},null,6)],4),M(me),u("img",{class:"bg_img",src:G,style:f({transform:"none"})},null,4),u("div",fe,[p(u("div",{class:"debug-trigger",onClick:a},null,512),[[i]]),c(n)().debug?(_(),g("div",ve,[ye,u("p",null,"cursor: "+C(c(t).cursor.x)+", "+C(c(t).cursor.y),1)])):L("",!0)]),c(n)().debug?L("",!0):p((_(),g("div",be,[u("p",null,[xe,p((_(),g("a",we,Ee)),[[i]]),Se]),u("p",null,[p((_(),g("a",$e,Be)),[[i]]),Ne,p((_(),g("a",Me,Ie)),[[i]])])])),[[h]])])}}});function Ae(o){o.directive("dot-hover",(t,s)=>{t.onmouseenter=()=>{n().hover=s.value==null?!0:!s.value},t.onmouseleave=()=>{n().hover=!1}}),o.directive("text-hover",{mounted(t,s){t.onmouseenter=()=>{n().caret=!0},t.onmouseleave=()=>{n().caret=!1}}})}const Te=Y(qe);Te.use(Ae).use(H()).mount("#app");
