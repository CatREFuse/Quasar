var C=Object.defineProperty;var L=(t,e,s)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var h=(t,e,s)=>(L(t,typeof e!="symbol"?e+"":e,s),s);import{d as P,a as _,b as q,o as w,r as x,w as S,c as R,e as D,f as b,g as E,h as u,n as I,u as c,i as v,j as M,k as T,t as f,l as N,m as O,p as $,q as A,s as B}from"./vendor.a6db5cbf.js";const j=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}};j();const z="modulepreload",k={},H="./",y=function(e,s){return!s||s.length===0?e():Promise.all(s.map(r=>{if(r=`${H}${r}`,r in k)return;k[r]=!0;const n=r.endsWith(".css"),a=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${a}`))return;const o=document.createElement("link");if(o.rel=n?"stylesheet":z,n||(o.as="script",o.crossOrigin=""),o.href=r,document.head.appendChild(o),n)return new Promise((l,d)=>{o.addEventListener("load",l),o.addEventListener("error",d)})})).then(()=>e())};var V="./assets/quasar_logo_bg.20a7d8f1.svg";class W{constructor(e,s,r,n,a,o,l){h(this,"id");h(this,"title");h(this,"iconName");h(this,"command");h(this,"loginRequire");h(this,"urlPattern");h(this,"tags");this.id=o,this.title=e,this.iconName=s,this.command=r,this.loginRequire=n,this.urlPattern=a,this.tags=l}}var m;(function(t){t.phone="phone",t.desktop="desktop"})(m||(m={}));var g;(function(t){t.light="light",t.dark="dark"})(g||(g={}));var i=P({id:"app",state(){return{engine:new W("","","",0,"",0,""),engines:[],hover:!1,mousedown:!1,caret:!1,debug:!1,deviceClass:m.desktop,systemTheme:g.light}},actions:{async doSearch(t){var s;const e=(s=this.engine)==null?void 0:s.urlPattern.replace("{query}",t);await this.postRecord(t,this.engine),window.location.href=e||" "},async postRecord(t,e){await _.post("https://api.catrefuse.com/add-record",{title:e.title,url_pattern:e.urlPattern,engine_id:e.id,tags:e.tags,search_string:t}).then(s=>{}).catch(s=>console.error(s))},switchEngineByAdd(t){var s;let e=0;for(let r=0;r<this.engines.length;r++)this.engines[r].title==((s=this.engine)==null?void 0:s.title)&&(e=r);e=e+t,e>=this.engines.length?e=e-this.engines.length:e<0&&(e=e+this.engines.length),this.engine=this.engines[e]},selectEngine(t){this.engine=t},selectEngineByIndex(t){this.engine=this.engines[t]},selectEngineByTitle(t){for(let e of this.engines)if(e.title==t){this.engine=e;break}},selectEngineByCommand(t){for(let e of this.engines)if(e.command==t){this.engine=e;break}}}});function F(){_.get("https://cdn.catrefuse.com/engines.json").then(t=>{i().engines=t.data,i().engine=t.data[0]}).catch(t=>{console.error(t.message)})}const K={class:"grid grid-cols-12 gap-2 text-gray-800"},U={class:"fixed bottom-4 right-4 width-[200px] font-['Fira_Code']"},X={key:0},Y=u("h3",{class:"mb-1"},"debugger",-1),G=q({setup(t){function e(){i().deviceClass=window.innerWidth>=700?m.desktop:m.phone}function s(){i().systemTheme=window.matchMedia("(prefers-color-scheme: dark)").matches?g.dark:g.light}w(()=>{e(),window.addEventListener("resize",()=>{e()}),s(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{s()}),document.querySelector("body").addEventListener("teouched",l=>{l.preventDefault()})});const r=x({cursor:{x:0,y:0},visualCursor:{x:0,y:0}}),n=x({grow:1,degree:0});S(()=>r.visualCursor,(o,l)=>{const d={x:o.x-l.x,y:o.y-l.y},p=Math.sqrt(d.x*d.x+d.y*d.y);n.grow=Math.min(Math.max(p/20,1),2),n.degree=Math.atan2(d.y,d.x)*180/Math.PI}),w(()=>{F(),document.onmousemove=function(l){r.cursor={x:l.clientX,y:l.clientY}},document.onmousedown=()=>{i().mousedown=!0},document.onmouseup=()=>{i().mousedown=!1},setInterval(()=>{r.visualCursor={x:r.cursor.x,y:r.cursor.y}},50)});function a(){i().debug=!i().debug}return(o,l)=>{const d=R("router-view"),p=D("dot-hover");return b(),E("div",K,[u("div",{class:"cursor-container invisible md:visible",style:v({transform:`translate(${c(r).visualCursor.x-25}px,${c(r).visualCursor.y-25}px)`})},[u("div",{class:I({cursor:!0,hover:c(i)().hover,clicked:c(i)().mousedown,caret:c(i)().caret}),style:v({transform:c(i)().caret?"none":`rotate(${c(n).degree}deg) scale(${c(n).grow}, 1)  `})},null,6)],4),M(d,{class:"mb-8"}),u("img",{class:"fixed z-[-1000] -right-1 -bottom-1 pointer-events-none",src:V,style:v({transform:"none"})},null,4),u("div",U,[T(u("div",{class:"fixed top-1 right-1 w-12 h-12 hover:cursor-pointer",onClick:a},null,512),[[p]]),c(i)().debug?(b(),E("div",X,[Y,u("p",null,"cursor: "+f(c(r).cursor.x)+", "+f(c(r).cursor.y),1),u("p",null,"deviceClass: "+f(c(i)().deviceClass),1),u("p",null,"systemTheme: "+f(c(i)().systemTheme),1)])):N("",!0)])])}}});function J(t){t.directive("dot-hover",(e,s)=>{e.onmouseenter=()=>{i().hover=s.value==null?!0:!s.value},e.onmouseleave=()=>{i().hover=!1}}),t.directive("text-hover",{mounted(e,s){e.onmouseenter=()=>{i().caret=!0},e.onmouseleave=()=>{i().caret=!1}}})}const Q=[{path:"/",name:"Home",component:()=>y(()=>import("./Home.1e7d9296.js"),["assets/Home.1e7d9296.js","assets/Home.c5dab257.css","assets/vendor.a6db5cbf.js"])},{path:"/search",name:"SearchRedirect",component:()=>y(()=>import("./SearchRedrirect.0fe1b3d9.js"),["assets/SearchRedrirect.0fe1b3d9.js","assets/vendor.a6db5cbf.js"]),props:t=>({query:t.query.query,engine:t.query.engine})}],Z=O({history:$(),routes:Q});y(()=>Promise.resolve({}),["assets/transition.f598f98a.css"]);const ee=A(G);ee.use(J).use(Z).use(B()).mount("#app");export{i as u};
