import{d as C,a as y,b as E,o as _,r as x,w as L,c as P,e as S,f as w,g as b,h as d,n as q,u as c,i as p,j as I,k as M,t as g,l as R,m as T,p as D,q as O,s as $}from"./vendor.a6db5cbf.js";const A=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}};A();const B="modulepreload",k={},j="./",v=function(e,r){return!r||r.length===0?e():Promise.all(r.map(s=>{if(s=`${j}${s}`,s in k)return;k[s]=!0;const n=s.endsWith(".css"),a=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${a}`))return;const i=document.createElement("link");if(i.rel=n?"stylesheet":B,n||(i.as="script",i.crossOrigin=""),i.href=s,document.head.appendChild(i),n)return new Promise((u,l)=>{i.addEventListener("load",u),i.addEventListener("error",l)})})).then(()=>e())};var N="./assets/quasar_logo_bg.20a7d8f1.svg",h;(function(t){t.phone="phone",t.desktop="desktop"})(h||(h={}));var m;(function(t){t.light="light",t.dark="dark"})(m||(m={}));var o=C({id:"app",state(){return{engine:null,engines:null,hover:!1,mousedown:!1,caret:!1,debug:!1,deviceClass:h.desktop,systemTheme:m.light,hoverEngine:null}},actions:{async doSearch(t){var r;const e=(r=this.engine)==null?void 0:r.urlPattern.replace("{query}",t);await this.postRecord(t,this.engine),window.location.href=e||" "},async postRecord(t,e){await y.post("https://api.catrefuse.com/add-record",{title:e.title,url_pattern:e.urlPattern,engine_id:e.id,tags:e.tags,search_string:t}).then(r=>{}).catch(r=>console.error(r))},switchEngineByAdd(t){var r;let e=0;for(let s=0;s<this.engines.length;s++)this.engines[s].title==((r=this.engine)==null?void 0:r.title)&&(e=s);e=e+t,e>=this.engines.length?e=e-this.engines.length:e<0&&(e=e+this.engines.length),this.engine=this.engines[e]},selectEngine(t){this.engine=t},selectEngineByIndex(t){this.engine=this.engines[t]},selectEngineByTitle(t){for(let e of this.engines)if(e.title==t){this.engine=e;break}},selectEngineByCommand(t){for(let e of this.engines)if(e.command==t){this.engine=e;break}}}});function z(){y.get("https://cdn.catrefuse.com/engines.json").then(t=>{o().engines=t.data,o().engine=t.data[0]}).catch(t=>{console.error(t.message)})}const H={class:"grid grid-cols-12 gap-2 text-gray-800"},V={class:"fixed bottom-4 right-4 width-[200px] font-['Fira_Code']"},W={key:0},F=d("h3",{class:"mb-1"},"debugger",-1),K=E({setup(t){function e(){o().deviceClass=window.innerWidth>=700?h.desktop:h.phone}function r(){o().systemTheme=window.matchMedia("(prefers-color-scheme: dark)").matches?m.dark:m.light}_(()=>{e(),window.addEventListener("resize",()=>{e()}),r(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{r()})});const s=x({cursor:{x:0,y:0},visualCursor:{x:0,y:0}}),n=x({grow:1,degree:0});L(()=>s.visualCursor,(i,u)=>{const l={x:i.x-u.x,y:i.y-u.y},f=Math.sqrt(l.x*l.x+l.y*l.y);n.grow=Math.min(Math.max(f/20,1),2),n.degree=Math.atan2(l.y,l.x)*180/Math.PI}),_(()=>{z(),document.onmousemove=function(u){s.cursor={x:u.clientX,y:u.clientY}},document.onmousedown=()=>{o().mousedown=!0},document.onmouseup=()=>{o().mousedown=!1},setInterval(()=>{s.visualCursor={x:s.cursor.x,y:s.cursor.y}},50)});function a(){o().debug=!o().debug}return(i,u)=>{const l=P("router-view"),f=S("dot-hover");return w(),b("div",H,[d("div",{class:"cursor-container invisible md:visible",style:p({transform:`translate(${c(s).visualCursor.x-25}px,${c(s).visualCursor.y-25}px)`})},[d("div",{class:q({cursor:!0,hover:c(o)().hover,clicked:c(o)().mousedown,caret:c(o)().caret}),style:p({transform:c(o)().caret?"none":`rotate(${c(n).degree}deg) scale(${c(n).grow}, 1)  `})},null,6)],4),I(l,{class:"mb-8"}),d("img",{name:"background-img",class:"fixed z-[-1000] -right-1 -bottom-1 pointer-events-none select-none",src:N,style:p({transform:"none"})},null,4),d("div",V,[M(d("div",{class:"fixed top-1 right-1 w-12 h-12 hover:cursor-pointer",onClick:a},null,512),[[f]]),c(o)().debug?(w(),b("div",W,[F,d("p",null,"cursor: "+g(c(s).cursor.x)+", "+g(c(s).cursor.y),1),d("p",null,"deviceClass: "+g(c(o)().deviceClass),1),d("p",null,"systemTheme: "+g(c(o)().systemTheme),1)])):R("",!0)])])}}});function U(t){t.directive("dot-hover",(e,r)=>{e.onmouseenter=()=>{o().hover=r.value==null?!0:!r.value},e.onmouseleave=()=>{o().hover=!1}}),t.directive("text-hover",{mounted(e,r){e.onmouseenter=()=>{o().caret=!0},e.onmouseleave=()=>{o().caret=!1}}})}const X=[{path:"/",name:"Home",component:()=>v(()=>import("./Home.fd6e3e77.js"),["assets/Home.fd6e3e77.js","assets/Home.036720d7.css","assets/vendor.a6db5cbf.js"])},{path:"/search",name:"SearchRedirect",component:()=>v(()=>import("./SearchRedrirect.e90f9973.js"),["assets/SearchRedrirect.e90f9973.js","assets/vendor.a6db5cbf.js"]),props:t=>({query:t.query.query,engine:t.query.engine})}],Y=T({history:D(),routes:X});v(()=>Promise.resolve({}),["assets/transition.f598f98a.css"]);const G=O(K);G.use(U).use(Y).use($()).mount("#app");export{o as u};
